
<script src="app/assets/javascripts/responsive_waterfall.js"></script>
<%= render "devise/shared/navbar" %>

<style>
  body {
    overflow-x: hidden !important;
  }
</style>

<div class="title">
  <h2>MY STYLE</h2>
</div>
<%= link_to "BACK", :back, class: "filter-btn", style: "margin:20px;width:90px" %>

<!-- PRODUCT WISHLIST -->
<h4 class="page-title" style="text-align:center;">Wishlist</h4>
<div class="wf-container">
  <div class="main-carousel">
    <% if current_user.liked_products.nil? %>
      <p><h6>No liked products!</h6></p>
      <% else %>
       <% current_user.liked_products.each do |product| %>
          <% if product.image_url.nil? %>
            <p>No Image Here, Sorry!</p>
            <% else %>
              <div class="card" style="background:#F2EFEB">
               <%= cl_image_tag product.image_url %>
                <div class="Wishlist-content">
                  <h6><%= product.name %></h6>
                  <h6><%= link_to "Buy", product.url, target: "blank", class: "black-white-link"%></h6>
                  <h6><%= product.brand.name %></h6>
                  <h6>$<%= product.price %></h6>
                </div>
              </div>
          <% end %>
      <% end %>
    <% end %>
  </div>
</div>

<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

<br><br>
<!-- BRANDS LIKED -->
<div class="wf-container">
  <div class="page-title">
    <h4>My Brands</h4>
  </div>
  <% if current_user.liked_brands.empty? %>
    <p><h6>No liked brands!</h6></p>
  <% else %>
    <% current_user.liked_brands.each do |brand| %>
      <div class="wf-box">
        <% if brand.brand_images.second.nil? %>
        <% else %>
          <%= cl_image_tag brand.brand_images.second.url, style: "border-top-left-radius:20px;border-top-right-radius:20px;" %>
          <div class="content" style="text-align:center;align-items:center;">
            <h3><%= link_to brand.name, brand_path(brand), style:"color:black"%>
            <h5><%= brand.country %></h5>
          </div>
        <% end %>
      </div>
    <% end %>
  <% end %>
</div>

<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>


<!-- POP-UP EDIT FORM -->


<!-- CAROUSEL JS -->
<script type="text/javascript">
// external js: flickity.pkgd.js
var carousel = document.querySelector('.main-carousel');
var flkty = new Flickity( carousel, {
  imagesLoaded: true,
  percentPosition: false,
  freeScroll: true,
  contain: true,
  // disable previous & next buttons and dots
  prevNextButtons: false,
  pageDots: false,
  autoPlay: true
});

var imgs = carousel.querySelectorAll('.card img');
// get transform property
var docStyle = document.documentElement.style;
var transformProp = typeof docStyle.transform == 'string' ?
  'transform' : 'WebkitTransform';

flkty.on( 'scroll', function() {
  flkty.slides.forEach( function( slide, i ) {
    var img = imgs[i];
    var x = ( slide.target + flkty.x ) * -1/3;
    img.style[ transformProp ] = 'translateX(' + x  + 'px)';
  });
});
</script>
